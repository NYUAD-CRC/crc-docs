

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>$ARCHIVE &mdash; CRC Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Data Sharing with Collaborators" href="data_sharing.html" />
    <link rel="prev" title="$HOME and $SCRATCH" href="home_scratch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/crc-wordmark-light.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">HPC Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../hpc.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../old_hpc.html">Previous HPC Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/index.html">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Storage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="home_scratch.html">$HOME and $SCRATCH</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">$ARCHIVE</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#what-s-inside-archive">What’s inside <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#state-of-the-file-in-archive">State of the file in <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-identify-the-state-of-a-file">How to identify the state of a file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-archive-and-de-archive">How to Archive and De Archive</a></li>
<li class="toctree-l3"><a class="reference internal" href="#quick-glance-into-the-archive-commands">Quick Glance into the archive commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="data_sharing.html">Data Sharing with Collaborators</a></li>
<li class="toctree-l2"><a class="reference internal" href="archive_work_merge.html">Merge of $WORK and $ARCHIVE</a></li>
<li class="toctree-l2"><a class="reference internal" href="mount_archive.html">Mount $ARCHIVE with SSHFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#summary">Summary</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#know-your-quota">Know Your Quota</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#best-practices">Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/index.html">Jobs Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ood/index.html">HPC Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Research Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/index.html">HPC Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_load/index.html">HPC Load</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RCS Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/rcs.html">Research Computing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/1001n.html">1001n Research Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/kb/index.html">Knowledge Base</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data_science/data_science.html">Research Data Science Services</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Team</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../team.html">Center for Research Computing Team</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CRC Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Storage</a> &raquo;</li>
        
      <li>$ARCHIVE</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="archive">
<h1>$ARCHIVE<a class="headerlink" href="#archive" title="Permalink to this heading">¶</a></h1>
<p>In order to simplify the storage mount points and the user experience in storing their data on the
Jubail HPC, We have merged the functionalities of two storages, <code class="docutils literal notranslate"><span class="pre">$WORK</span></code> (<code class="docutils literal notranslate"><span class="pre">/work/&lt;NetID&gt;</span></code>) and
<code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code> (<code class="docutils literal notranslate"><span class="pre">/archive/NetID&gt;</span></code>) into a single storage <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code> (<code class="docutils literal notranslate"><span class="pre">/archive/&lt;NetID&gt;</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code> can be accessed on login nodes as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>cd $ARCHIVE
# is equivalent to
cd /archive/&lt;your-NetID&gt;
</pre></div>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The <code class="docutils literal notranslate"><span class="pre">/work/&lt;NetID&gt;</span></code> has been discontinued from 2nd Feb 2023. The previous data in <code class="docutils literal notranslate"><span class="pre">/work/&lt;NetID&gt;</span></code> is
moved to <code class="docutils literal notranslate"><span class="pre">/archive/work/&lt;NetID&gt;</span></code> as a temporary staging area to allow users to move out their
existing data from <code class="docutils literal notranslate"><span class="pre">$WORK</span></code> to archive (<code class="docutils literal notranslate"><span class="pre">/archive/&lt;NetID&gt;/…</span></code>). The <code class="docutils literal notranslate"><span class="pre">/archive/work/&lt;NetID&gt;</span></code> is
available for the users from the 3rd of Feb 2023 and would be deprecated after a period of 180 days.</p>
</div>
<p>When storage is shared among many users, rules must be set to prevent users from consuming disk space
excessively at the expense of others. For this purpose, HPC systems enforce disk quotas to users and
groups of users. The regular cleanup of the <code class="docutils literal notranslate"><span class="pre">/scratch/&lt;NetID&gt;</span></code> storage is essential to maintain its efficiency
and easily manage the capacity.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The current policy is to remove any files(data) that have not been accessed (viewed, created or modified)
for more than 90 days.</p>
</div>
<p>On the HPC, disk quotas are enforced on <code class="docutils literal notranslate"><span class="pre">/home</span></code> and <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> (not <code class="docutils literal notranslate"><span class="pre">/archive</span></code> ).</p>
<dl class="simple">
<dt>There are two quota constraints:</dt><dd><ul class="simple">
<li><p>The total amount of disk space</p></li>
<li><p>The total number of files.</p></li>
</ul>
</dd>
</dl>
<p>Once you reach a quota limit your jobs may be killed. So it is a good practice to check your quota before submitting a job that
will generate a lot of data.</p>
<p>We urge our users to clean up their <code class="docutils literal notranslate"><span class="pre">$SCRATCH</span></code> storage regularily.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">myquota</span></code> command in the terminal on the HPC to check your current usage and quota.</p>
<p>Example output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                    <span class="n">DISK</span> <span class="n">SPACE</span>                <span class="c1"># FILES (1000&#39;s)</span>
<span class="n">filesystem</span>       <span class="n">size</span>      <span class="n">quota</span>            <span class="n">number</span>      <span class="n">quota</span>
            <span class="o">--------------------------</span>   <span class="o">--------------------------</span>
<span class="o">/</span><span class="n">home</span>         <span class="mi">131</span><span class="n">KB</span>       <span class="mi">20</span><span class="n">GB</span> <span class="p">(</span> <span class="mi">0</span><span class="o">%</span><span class="p">)</span>           <span class="mi">0</span>        <span class="mi">100</span> <span class="p">(</span> <span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="o">/</span><span class="n">scratch</span>      <span class="mi">220</span><span class="n">GB</span>     <span class="mi">5242</span><span class="n">GB</span> <span class="p">(</span> <span class="mi">4</span><span class="o">%</span><span class="p">)</span>           <span class="mi">4</span>        <span class="mi">500</span> <span class="p">(</span> <span class="mi">1</span><span class="o">%</span><span class="p">)</span>
<span class="o">/</span><span class="n">archive</span>      <span class="mi">418</span><span class="n">GB</span>     <span class="mi">5242</span><span class="n">GB</span> <span class="p">(</span> <span class="mi">8</span><span class="o">%</span><span class="p">)</span>           <span class="mi">3</span>        <span class="mi">125</span> <span class="p">(</span> <span class="mi">3</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="what-s-inside-archive">
<h2>What’s inside <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code><a class="headerlink" href="#what-s-inside-archive" title="Permalink to this heading">¶</a></h2>
<p>The archive processes are described below in the form of a flowchart.</p>
<img alt="../../_images/archive2.jpg" src="../../_images/archive2.jpg" />
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">archive</span></code> comprises of two types of storages:</p>
<ul>
<li><p>Normal Storage (fast)</p></li>
<li><p>Long Term Storage - Tape drive (slow)</p></li>
</ul>
</li>
<li><p><strong>Process 1 :</strong> The data in the Tape drive is synced with the storage every 12 hours, so that a copy of the
files is available on the Tape drive as well.</p></li>
<li><p><strong>Process 2 :</strong> Once the usage of the total storage hits 80% , the system atomatically frees up space by keeping only
a copy of the file on the tape drive (which can be retrieved later).</p></li>
<li><p>The freeing up of space is in accordance with the access timestamp of the files which are oldest.</p></li>
</ul>
</div>
<div class="section" id="state-of-the-file-in-archive">
<h2>State of the file in <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code><a class="headerlink" href="#state-of-the-file-in-archive" title="Permalink to this heading">¶</a></h2>
<p>Since the <code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code> acts both as a storage soultion and long term storage (tape drive) as well, hence the state
of the file plays an important role in the same. There are essentially two types of states for a file in
<code class="docutils literal notranslate"><span class="pre">/archive</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code>: The file has a copy on the storage and the tape drive as well.</p></li>
<li><p>In the above figure, <code class="docutils literal notranslate"><span class="pre">file1,file2,file3,file4,file5</span></code> are in the <code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code> as they
are both available on the storage and the tape drive.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code>: The file is only available on the tape drive and has been moved (released)
from the storage to free up space.</p></li>
<li><p>In the above figure, <code class="docutils literal notranslate"><span class="pre">file6,file7,file8,file9,file10</span></code> are in the <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span></code> state as
they have been released/moved from the storage to the tape drive.</p></li>
</ul>
</div>
<div class="section" id="how-to-identify-the-state-of-a-file">
<h2>How to identify the state of a file<a class="headerlink" href="#how-to-identify-the-state-of-a-file" title="Permalink to this heading">¶</a></h2>
<p>In order to identify the state of files in a directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#dmfls -d &lt;path to archive directory&gt;</span>

<span class="c1">#for example:</span>
dmfls<span class="w"> </span>-d<span class="w"> </span>/archive/wz22/abc
</pre></div>
</div>
<p>In order to identify the state of a single file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#dmfls &lt;path to archive file&gt;</span>

<span class="c1">#for example:</span>
dmfls<span class="w"> </span>/archive/wz22/abc/input.txt
</pre></div>
</div>
<p>A sample output of the above directory command is shown below</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>wz22@login4<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span>dmfls<span class="w"> </span>-d<span class="w"> </span>/archive/wz22/abc
./hwloc/gnu/build.txt:<span class="w">  </span>exists<span class="w"> </span>archived,
./hwloc/src/hwloc-1.7.1.tar.bz2:<span class="w">  </span>exists<span class="w"> </span>archived,
./blat/src/bedGraphToBigWig:<span class="w">  </span>exists<span class="w"> </span>archived,
./blat/src/liftOver:<span class="w"> </span>released<span class="w"> </span>exists<span class="w"> </span>archived,
./blat/src/blat:<span class="w">  </span>exists<span class="w"> </span>archived,
./cufflinks/src/cufflinks-2.0.2.Linux_x86_64.tar.gz:<span class="w"> </span>released<span class="w"> </span>exists<span class="w"> </span>archived,
./cufflinks/src/cufflinks-2.1.1.Linux_x86_64.tar.gz:<span class="w">  </span>released<span class="w"> </span>exists<span class="w"> </span>archived,
./crystal-analysis/gnu/crystal_analysis-0.9.12.tbz2:<span class="w">  </span>exists<span class="w"> </span>archived,
</pre></div>
</div>
<p>It can be seen above in the sample output that the state of a few files is <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code>  while
some are in the <code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code>.</p>
</div>
<div class="section" id="how-to-archive-and-de-archive">
<h2>How to Archive and De Archive<a class="headerlink" href="#how-to-archive-and-de-archive" title="Permalink to this heading">¶</a></h2>
<img alt="../../_images/archive1.jpg" src="../../_images/archive1.jpg" />
<p>The above figure shows the following:</p>
<ul class="simple">
<li><p>The data from <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> or <code class="docutils literal notranslate"><span class="pre">/home</span></code> can be moved/copied to <code class="docutils literal notranslate"><span class="pre">/archive</span></code> using the usual unix
commands (<code class="docutils literal notranslate"><span class="pre">rsync,cp,mv</span></code>)</p></li>
<li><p>The commands to copy out data from <code class="docutils literal notranslate"><span class="pre">/archive</span></code> depend on the state of the file.</p></li>
</ul>
<p><strong>archived state</strong></p>
<ul class="simple">
<li><p>Since the <code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code> refers to the copy of the file available on both the storages, usual unix commands
(<code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">,</span> <span class="pre">rsync</span></code>) can be used to copy out the files from <code class="docutils literal notranslate"><span class="pre">/archive</span></code> to your <code class="docutils literal notranslate"><span class="pre">/scratch</span></code>.</p></li>
</ul>
<p><strong>released archived state</strong></p>
<ul class="simple">
<li><p>Since the <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code> refers that the file has been moved/released and is now only available
on the tape library, dearchiving the file would be a two-step process.</p></li>
<li><p>It would have to be first moved from the tape to the normal storage using
the <code class="docutils literal notranslate"><span class="pre">dmfget</span> <span class="pre">&lt;filename&gt;</span></code> command and then can be copied out to the required directory in your <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> using
the usual unix commands (<code class="docutils literal notranslate"><span class="pre">rsync</span> <span class="pre">,</span> <span class="pre">cp</span></code>).</p></li>
</ul>
<p>A simple dearchiving would have the following steps:</p>
<ol class="arabic simple">
<li><p>Go to the required <code class="docutils literal notranslate"><span class="pre">/archive</span></code> directory which you would like to copy out to your <code class="docutils literal notranslate"><span class="pre">/scratch</span></code>.</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>~<span class="o">]</span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/archive/wz22/abc
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>Check the state of the file using the <code class="docutils literal notranslate"><span class="pre">dmfls</span> <span class="pre">&lt;filename&gt;</span></code> command.</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>abc<span class="o">]</span>$<span class="w"> </span>ls
xyz.txt<span class="w"> </span>file2.txt
<span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>lib64<span class="o">]</span>$<span class="w"> </span>dmfls<span class="w"> </span>*
xyz.txt:<span class="w">  </span>exists<span class="w"> </span>archived,
file2.txt:<span class="w">  </span>released<span class="w"> </span>exists<span class="w"> </span>archived,
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>(optional) if there are files in the <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code>, use the <code class="docutils literal notranslate"><span class="pre">dmfget</span> <span class="pre">&lt;filename&gt;</span></code> command
to copy out them from the tape library to the storage to make them in the <code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code>.
This will run in the background and the progress can be tracked using the <code class="docutils literal notranslate"><span class="pre">dmfmonitor</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>abc<span class="o">]</span>$<span class="w"> </span>dmfget<span class="w"> </span>*
Execute<span class="w"> </span>watch<span class="w"> </span>dmfmonitor<span class="w"> </span>&lt;directory/file_name&gt;<span class="w"> </span>to<span class="w"> </span>see<span class="w"> </span>progress
<span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>abc<span class="o">]</span>$<span class="w"> </span>dmfmonitor<span class="w"> </span>*
xyz.txt:<span class="w"> </span>NOOP
file2.txt:<span class="w"> </span>RESTORE<span class="w"> </span>running<span class="w"> </span><span class="o">(</span><span class="m">0</span><span class="w"> </span>bytes<span class="w"> </span>moved<span class="o">)</span>
<span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>abc<span class="o">]</span>$<span class="w"> </span>dmfmonitor<span class="w"> </span>*
xyz.txt:<span class="w"> </span>NOOP
file2.txt:<span class="w"> </span>NOOP
<span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>lib64<span class="o">]</span>$<span class="w"> </span>dmfls<span class="w"> </span>*
xyz.txt:<span class="w">  </span>exists<span class="w"> </span>archived,
file2.txt:<span class="w">  </span>exists<span class="w"> </span>archived,
</pre></div>
</div>
<p>Note that in the command <code class="docutils literal notranslate"><span class="pre">dmfmonitor</span></code> when the status corresponding to the file is <code class="docutils literal notranslate"><span class="pre">NOOP</span></code>, means that
the file is now back in the storage and in the <code class="docutils literal notranslate"><span class="pre">archived</span></code> state.</p>
</li>
<li><p>Copy out the file from <code class="docutils literal notranslate"><span class="pre">/archive</span></code> to desired location in <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> using the usual unix commands (<code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">,</span> <span class="pre">rsync</span></code>).</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>base<span class="o">)</span><span class="w"> </span><span class="o">[</span>wz22@login1<span class="w"> </span>abc<span class="o">]</span>$<span class="w"> </span>cp<span class="w"> </span>-r<span class="w"> </span>/archive/wz22/abc<span class="w"> </span>/scratch/wz22/.
</pre></div>
</div>
</div></blockquote>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>A user can simply use the standard unix utilities like <code class="docutils literal notranslate"><span class="pre">rsync</span></code>, <code class="docutils literal notranslate"><span class="pre">cp</span></code> etc. to copy in or out the data
from/to  <code class="docutils literal notranslate"><span class="pre">/archive</span></code>. While copying out from archive, the rest of the <code class="docutils literal notranslate"><span class="pre">dmfget</span></code> command would be automatically handled in the background and
hence the time taken for the moving out would depend on the state of the file (released/exists).</p>
<p>Any operation performed on the archive files would first auto trasnfer the file to the <code class="docutils literal notranslate"><span class="pre">exists</span> <span class="pre">archived</span> <span class="pre">state</span></code> before
performing the operation.</p>
</div>
</div>
<div class="section" id="quick-glance-into-the-archive-commands">
<h2>Quick Glance into the archive commands<a class="headerlink" href="#quick-glance-into-the-archive-commands" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Navigating to archive</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">/archive/&lt;NetID&gt;</span></code></p></td>
<td><p>usual unix commands (<code class="docutils literal notranslate"><span class="pre">rsync,cd,cp,mv</span></code>) can be used</p></td>
</tr>
<tr class="row-odd"><td><p>List the state of the files</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dmfls</span> <span class="pre">&lt;filename&gt;</span></code></p></td>
<td><p>check for <code class="docutils literal notranslate"><span class="pre">archived</span> <span class="pre">state</span></code> and <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Retrieve from Tape drive to Storage</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dmfget</span> <span class="pre">&lt;filename&gt;</span></code></p></td>
<td><p>use when the file is in the <code class="docutils literal notranslate"><span class="pre">released</span> <span class="pre">archived</span> <span class="pre">state</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Monitor the state of a file</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dmfmonitor</span> <span class="pre">&lt;filename&gt;</span></code></p></td>
<td><p>Can be used to track if the migration from tape drive to storage is done.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Copy in to Archive</p></td>
<td><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rsync &lt;source-dir&gt; &lt;dest-dir&gt;</span>
</pre></div>
</div>
</td>
<td><p>Usual commands like rsync and cp can be used to copy in to <code class="docutils literal notranslate"><span class="pre">/archive</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Copy out from archive</p></td>
<td><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rsync &lt;source-dir&gt; &lt;dest-dir&gt;</span>
</pre></div>
</div>
</td>
<td><p>Usual commands like rsync and cp can be used to copy out from <code class="docutils literal notranslate"><span class="pre">/archive</span></code>. The dmfget would be handled in the backgroound.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dos</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Periodically clean your <code class="docutils literal notranslate"><span class="pre">/scratch</span></code></p></td>
<td><p>Files which have not been access for 90 days in <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> are deleted.</p></td>
</tr>
<tr class="row-odd"><td><p>Once a project is completed move the data over to <code class="docutils literal notranslate"><span class="pre">/archive</span></code></p></td>
<td><p>Moving data to <code class="docutils literal notranslate"><span class="pre">/archive</span></code> frees up space from <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> and avoids deletion of files if older than 90 days.</p></td>
</tr>
<tr class="row-even"><td><p>Use tar files to archive directories with large file count</p></td>
<td><p>Lesser the number of files, faster is the archiving and dearchiving process</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">$ARCHIVE</span></code> can also be mounted on your workstation, Linux,Mac and Windows.
Instructions are in this page: <a class="reference internal" href="mount_archive.html#mount-archive"><span class="std std-ref">Mount $ARCHIVE with SSHFS</span></a></p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="data_sharing.html" class="btn btn-neutral float-right" title="Data Sharing with Collaborators" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="home_scratch.html" class="btn btn-neutral float-left" title="$HOME and $SCRATCH" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2024, Center for Research Computing | NYU Abu Dhabi.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>