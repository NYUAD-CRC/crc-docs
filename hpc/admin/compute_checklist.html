

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Dalma Compute Node release checklist &mdash; CRC Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/crc-wordmark-light.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">RCS Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/index.html">Research Computing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/kb/index.html">Knowledge Base</a></li>
</ul>
<p class="caption"><span class="caption-text">HPC Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">High Performance Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/index.html">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/index.html">Jobs Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Research Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Help</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CRC Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Dalma Compute Node release checklist</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/hpc/admin/compute_checklist.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="dalma-compute-node-release-checklist">
<h1>Dalma Compute Node release checklist<a class="headerlink" href="#dalma-compute-node-release-checklist" title="Permalink to this headline">¶</a></h1>
<p>This document describes the configuration has to be taken place on any new compute node before going to production</p>
<ol class="arabic simple">
<li><p>Configure the iLO IP and BIOS settings as per below settings</p></li>
</ol>
<p>Press F9 while system is booting</p>
<p>Go to System Configuration</p>
<img alt="../../_images/boot1.png" src="../../_images/boot1.png" />
<p>iLO 4 configuration Utility</p>
<img alt="../../_images/boot2.png" src="../../_images/boot2.png" />
<p>Change the IP address and other details like below</p>
<img alt="../../_images/boot3.png" src="../../_images/boot3.png" />
<p>Advanced Network Options everything should be disabled</p>
<img alt="../../_images/boot4.png" src="../../_images/boot4.png" />
<p>Add standard user admin and password</p>
<img alt="../../_images/boot5.png" src="../../_images/boot5.png" />
<p>Go Back to BIOS/Platform Configuration àSystem Options à Processor Options disable hyperhreading</p>
<img alt="../../_images/boot6.png" src="../../_images/boot6.png" />
<p>Power Management change the setting like below</p>
<img alt="../../_images/boot7.png" src="../../_images/boot7.png" />
<p>Performance Options disable Turbo boosting</p>
<img alt="../../_images/boot8.png" src="../../_images/boot8.png" />
<p>Server Availability make the changes like below</p>
<img alt="../../_images/boot9.png" src="../../_images/boot9.png" />
<p>Advanced Options –&gt; Advanced System Options update serial number of old server</p>
<img alt="../../_images/boot10.png" src="../../_images/boot10.png" />
<p>Finally go to Boot Options change the boot order policy first then change Boot mode</p>
<img alt="../../_images/boot11.png" src="../../_images/boot11.png" />
<p>Save all setting and system will be rebooted</p>
<p>Allow system to be booted and let scan all the new hardware (Don’t press F9 during POST)</p>
<p>Again reboot the system and go to BIOS and change the Legacy BIOS Boot Order to</p>
<img alt="../../_images/boot12.png" src="../../_images/boot12.png" />
<p>Reboot the server and go to warewulf server to update the new mac address</p>
<p>[<a class="reference external" href="mailto:root&#37;&#52;&#48;warewulf">root<span>&#64;</span>warewulf</a>] #  wwnodescan –replace –netdev=eth0 compute-x-y</p>
<p>Execute the command above when the server is trying to acquire an IP address via DHCP during boot</p>
<img alt="../../_images/boot13.png" src="../../_images/boot13.png" />
<p>Note: Make sure while issuing the wwsh command in warewulf server no other nodes to be rebooted or booted without our knowledge otherwise it will update the MAC address wrongly and node will not boot.</p>
<ol class="arabic simple" start="2">
<li><p>Login to the iLO using web browser and downgrade the BIOS if it is not same as below</p></li>
</ol>
<img alt="../../_images/boot14.png" src="../../_images/boot14.png" />
<p>For updating BIOS go to AdministrationàFirmware and Browse for the firmware à Upload</p>
<p>Upgrade will 3-4 minutes and once it done reset the server and check the new version</p>
<p>Firmware location /home/admins/Computenode-Xl170r/BIOS/U14_1227.15</p>
<p>Go to Administration à Management à  update the SNMP settings
.. image:: img/boot15.png</p>
<p>Go to Network àiLO dedicated Network port à SNTP</p>
<img alt="../../_images/boot16.png" src="../../_images/boot16.png" />
<ol class="arabic simple" start="3">
<li><p>Update the Mellanox IB fw</p></li>
</ol>
<p>Check all Firmware levels including IB EDR card</p>
<blockquote>
<div><p>EDR HCA Firmware version should be: 12.14.2036</p>
</div></blockquote>
<p>The firmware is located at /home/admins/EDR_FW</p>
<p>Copy the firmware to the node</p>
<p># tar xvzf  fw-ConnectX4-rel-12_14_2036-825110-B21_Ax_Bx-UEFI-14.9.48-FlexBoot-3.4.722.tgz
# lspci | grep -i mellanox
88:00.0 Infiniband controller: Mellanox Technologies MT27700 Family [ConnectX-4]
# mstflint –d  88:00.0 –i /tmp/fw-ConnectX4-rel-12_14_2036-825110-B21_Ax_Bx-UEFI-14.9.48-FlexBoot-3.4.722.bi burn</p>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Center for Research Computing | NYU Abu Dhabi.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>