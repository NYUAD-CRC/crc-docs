

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>File Transfer using rsync &mdash; CRC Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="File Transfer using FileZilla" href="filezilla_transfer.html" />
    <link rel="prev" title="Access Jubail" href="access_jubail.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/crc-wordmark-light.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">HPC Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../hpc.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../old_hpc.html">Previous HPCs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/index.html">Accounts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#hardware">Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#typical-workflow">Typical Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#summary-of-nodes">Summary of Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#access">Access</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#data-transfers">Data Transfers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">File Transfer using rsync</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#some-examples-of-rsync-usage">Some examples of rsync usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ignoring-certain-files">Ignoring certain files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="filezilla_transfer.html">File Transfer using FileZilla</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#special-compute-nodes">Special Compute Nodes</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#fast-transfer-between-nyc-and-nyuad-hpc">Fast Transfer between NYC and NYUAD HPC</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#globus-data-transfer">Globus Data Transfer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../jobs/index.html">Jobs Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ood/index.html">HPC Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Research Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/index.html">HPC Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_load/index.html">HPC Load</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RCS Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/rcs.html">Research Computing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/1001n.html">1001n Research Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/kb/index.html">Knowledge Base</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../data_science/data_science.html">Research Data Science Services</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Team</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../team.html">Center for Research Computing Team</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CRC Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">System</a> &raquo;</li>
        
      <li>File Transfer using rsync</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="file-transfer-using-rsync">
<h1>File Transfer using rsync<a class="headerlink" href="#file-transfer-using-rsync" title="Permalink to this heading">¶</a></h1>
<p>For replicating datasets between the HPC clusters and your workstation, or between two filesystems on an HPC cluster, rsync offers powerful functionality beyond that of cp or scp commands. With rsync you can copy directories between your workstation and the HPC clusters - or between different filesystems - in such a way that permission and file modification timestamps are preserved, and that only files which have changed are transferred.</p>
<div class="admonition-basic-usage-of-rsync admonition">
<p class="admonition-title">Basic Usage of rsync</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rsync<span class="w"> </span><span class="o">[</span>options<span class="o">]</span><span class="w"> </span><span class="nb">source</span><span class="w"> </span><span class="o">[</span>source<span class="o">]</span><span class="w"> </span>destination
</pre></div>
</div>
</div>
<p>Where source is a list of one or more source files or directories to copy and destination is a directory into which to copy source.</p>
<p>Commonly useful options are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-a</span></code> “Archive” mode - permissions and timestamps of the source are replicated at the destination.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span></code> “Verbose”.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-n</span></code>  “dry run” - don’t actually do anything, just indicate what would be done.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-C</span></code> “follow CVS ignore conventions”</p></li>
</ul>
<div class="admonition-before-actually-copying-files admonition">
<p class="admonition-title">Before Actually Copying Files</p>
<p>rsync treats destination in different ways:a new name for the copy of source, a parent directory into which to copy source, or a parent directory into which to place the contents of source, depending on the exact context of the command. For this reason, it is highly advisable to first run rsync with -n and -v to see exactly what rsync will do before issuing the “real” command, eg:</p>
<div class="admonition-dry-run-first admonition">
<p class="admonition-title">Dry Run First!</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rsync<span class="w"> </span>-nav<span class="w"> </span><span class="nb">source</span><span class="w"> </span>destination
rsync<span class="w"> </span>-av<span class="w"> </span><span class="nb">source</span><span class="w"> </span>destination
</pre></div>
</div>
</div>
</div>
<p>For detailed information about rsync, type <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">rsync</span></code> at the command line.</p>
<div class="section" id="some-examples-of-rsync-usage">
<h2>Some examples of rsync usage<a class="headerlink" href="#some-examples-of-rsync-usage" title="Permalink to this heading">¶</a></h2>
<p>To replicate in your /scratch area a directory tree you have saved in /home</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/<span class="nv">$USER</span>/
$<span class="w"> </span>ls<span class="w"> </span>-F
my_input_data/
$<span class="w"> </span>rsync<span class="w"> </span>-nav<span class="w"> </span>my_input_data<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
building<span class="w"> </span>file<span class="w"> </span>list<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
my_input_data/file1
my_input_data/file2

$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>my_input_data<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
building<span class="w"> </span>file<span class="w"> </span>list<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
my_input_data/file1
my_input_data/file2

$<span class="w"> </span>ls<span class="w"> </span>-F<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
my_input_data/
</pre></div>
</div>
<p>There is now a copy of my_input_data directory under <code class="docutils literal notranslate"><span class="pre">/scratch/$USER/my_run_dir</span></code>.</p>
<p><strong>If you append / to source, rsync will copy the contents of source rather than the source directory itself</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/<span class="nv">$USER</span>/
$<span class="w"> </span>ls<span class="w"> </span>-F
my_input_data/
$<span class="w"> </span>rsync<span class="w"> </span>-nav<span class="w"> </span>my_input_data/<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
building<span class="w"> </span>file<span class="w"> </span>list<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
file1
file2

$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>my_input_data/<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
building<span class="w"> </span>file<span class="w"> </span>list<span class="w"> </span>...<span class="w"> </span><span class="k">done</span>
file1
file2

$<span class="w"> </span>ls<span class="w"> </span>-F<span class="w"> </span>/scratch/<span class="nv">$USER</span>/my_run_dir
file1
file2
</pre></div>
</div>
<p>The host name followed by a colon tells rsync that source or destination is on another host. If your username on the other host is different from the username on the current host, you can specify the remote username with <a class="reference external" href="mailto:username&#37;&#52;&#48;remotehost">username<span>&#64;</span>remotehost</a>: as following:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>ls<span class="w"> </span>-F
my_input_data/
$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>my_input_data<span class="w"> </span>&lt;your-net-id&gt;@jubail.abudhabi.nyu.edu:/scratch/&lt;your-net-id&gt;/my_run_dir
<span class="c1">### For Example ###</span>
$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>my_input_data<span class="w"> </span>wz22@jubail.abudhabi.nyu.edu:/scratch/wz22/my_run_dir
</pre></div>
</div>
<p>To copy in the other direction, from <code class="docutils literal notranslate"><span class="pre">/scratch</span></code> on HPC to your workstation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>hostname
my_workstation
$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>&lt;your-net-id&gt;@jubail.abudhabi.nyu.edu:/scratch/&lt;your-net-id&gt;/my_run_dir<span class="w"> </span>my_results
<span class="c1">### For Example ###</span>
$<span class="w"> </span>rsync<span class="w"> </span>-av<span class="w"> </span>wz22@jubail.abudhabi.nyu.edu:/scratch/wz22/my_run_dir<span class="w"> </span>my_results
$<span class="w"> </span>ls<span class="w"> </span>my_results
</pre></div>
</div>
<p>Only those files with modifications will be copired from the HPC to your workstation.</p>
</div>
<div class="section" id="ignoring-certain-files">
<h2>Ignoring certain files<a class="headerlink" href="#ignoring-certain-files" title="Permalink to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">-C</span></code> option tells rsync to follow CVS conventions about ignoring certain files.The conventions are described fully in the man page (man rsync) but in summary, when <code class="docutils literal notranslate"><span class="pre">-C</span></code> is used the following files are ignored  or any file or directory whose name matches any of these mentioned below are ignored:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>RCS<span class="w"> </span>SCCS<span class="w"> </span>CVS<span class="w"> </span>CVS.adm<span class="w"> </span>RCSLOG<span class="w"> </span>cvslog.*<span class="w"> </span>tags<span class="w"> </span>TAGS<span class="w"> </span>.make.state<span class="w"> </span>.nse_depinfo<span class="w"> </span>*~<span class="w"> </span><span class="c1">#* .#* ,* _$* *$ *.old *.bak *.BAK *.orig *.rej .del-* *.a *.olb *.o *.obj *.so *.exe *.Z *.elc *.ln core .svn/</span>
</pre></div>
</div>
<p>For example, when copying a tree of source code, you probably want the .c, .f and .h files but not the .o files, to define your own ignored rsync files use any of those methods.</p>
<ul class="simple">
<li><dl class="simple">
<dt>Any file whose name matches a pattern listed in the environment variable <code class="docutils literal notranslate"><span class="pre">CVSIGNORE</span></code>.</dt><dd><ul>
<li><p>This environment variable takes a list of patterns separated by spaces, such as the default list above.</p></li>
<li><p>When defining <code class="docutils literal notranslate"><span class="pre">CVSIGNORE</span></code> you will need to enclose the definition in quotation marks.</p></li>
<li><p>For example to skip Fortran output to unnamed unit numbers (whose files have names like <code class="docutils literal notranslate"><span class="pre">fort.99</span></code>) and netcdf files whose name ends in <code class="docutils literal notranslate"><span class="pre">intermediate.nc</span></code>, set <code class="docutils literal notranslate"><span class="pre">CVSIGNORE</span></code> as follows (note that this syntax is for <code class="docutils literal notranslate"><span class="pre">BASH</span></code>)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">CVSIGNORE</span><span class="o">=</span><span class="s2">&quot;fort.?? *.intermediate.nc&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><dl class="simple">
<dt>Or any file whose name matches a pattern listed in the file $HOME/.cvsignore, or in a file named .cvsignore within a directory being copied.</dt><dd><ul>
<li><p>This file has contents as per $CVSIGNORE, but with one pattern per line, for example:</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cat<span class="w"> </span>.cvsignore
fort.??
*.intermediate.nc
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="filezilla_transfer.html" class="btn btn-neutral float-right" title="File Transfer using FileZilla" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="access_jubail.html" class="btn btn-neutral float-left" title="Access Jubail" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2023, Center for Research Computing | NYU Abu Dhabi.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>