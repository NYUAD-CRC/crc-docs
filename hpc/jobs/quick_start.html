

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Quick Intro to Job Submission &mdash; CRC Documentation  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Difference in Job Submission between Jubail and Dalma" href="job_jubail.html" />
    <link rel="prev" title="Jobs Management" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/crc-wordmark-light.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">HPC Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../hpc.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dalma.html">Dalma HPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../accounts/index.html">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../system/index.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../storage/index.html">Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Jobs Management</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Quick Intro to Job Submission</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#things-to-keep-in-mind">Things to Keep in mind</a></li>
<li class="toctree-l3"><a class="reference internal" href="#partitions-summary">Partitions Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sample-job-script">Sample Job Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-slurm-commands">Basic SLURM Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requesting-a-gpu-node">Requesting a GPU node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#preempt-partition">Preempt Partition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="job_jubail.html">Difference in Job Submission between Jubail and Dalma</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch_job.html">Batch Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="interactive.html">Interactive Sessions</a></li>
<li class="toctree-l2"><a class="reference internal" href="job_array.html">Job Array</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_job_array.html">Parallel Job Array</a></li>
<li class="toctree-l2"><a class="reference internal" href="job_submit.html">Submitting a Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="job_status.html">Checking Job Status</a></li>
<li class="toctree-l2"><a class="reference internal" href="job_cancel.html">Cancelling a Job</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.html">Performance Considerations</a></li>
<li class="toctree-l2"><a class="reference internal" href="hpc_slurm.html">A Detailed SLURM Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ood/index.html">HPC Web Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../research/index.html">Research Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help/index.html">Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../training/index.html">HPC Training</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hpc_load/index.html">HPC Load</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">RCS Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/rcs.html">Research Computing Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/1001n.html">1001n Research Cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/kb/index.html">Knowledge Base</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rcs/data_science/index.html">Research Data Science Services</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Team</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../team.html">Center for Research Computing Team</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">CRC Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Jobs Management</a> &raquo;</li>
        
      <li>Quick Intro to Job Submission</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quick-intro-to-job-submission">
<h1>Quick Intro to Job Submission<a class="headerlink" href="#quick-intro-to-job-submission" title="Permalink to this heading">¶</a></h1>
<div class="section" id="things-to-keep-in-mind">
<h2>Things to Keep in mind<a class="headerlink" href="#things-to-keep-in-mind" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-auto docutils align-default">
<tbody>
<tr class="row-odd"><td><p><strong>Types of Jobs</strong></p></td>
<td><p>The jobs are basically categorized into four types based on their resource requirements (Small,Medium,Large,XLarge).</p></td>
</tr>
<tr class="row-even"><td><p><strong>Quick Testing</strong></p></td>
<td><p>Use the prempt partition for quick testing of your code. More details below.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Special jobs</strong></p></td>
<td><p>Nvidia (GPU), bigmem (Large memory) jobs fall into this category and are limited in resource.</p></td>
</tr>
<tr class="row-even"><td><p><strong>Default WallTime</strong></p></td>
<td><p>The default Wall time of all the jobs is 5 hours (except for <code class="docutils literal notranslate"><span class="pre">preempt</span></code> partition). Each type of job has a different Max WallTime limit discussed below.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Default Memory</strong></p></td>
<td><p>By Default, 3.75GB of memory is assigned to every CPU requested. So if 4 CPUs (<code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">-n</span> <span class="pre">4</span></code>) are requested, the assigned memory would be 15GB.</p></td>
</tr>
</tbody>
</table>
<ul>
<li><p><strong>Partitions</strong>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compute</span></code>: General purpose partition for all the normal runs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nvidia</span></code> : Partition of GPU jobs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bigmem</span></code> : Partition for large memory jobs. Only jobs requesting more than 500GB will fall into this category.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prempt</span></code> : Supports all types of jobs with a grace period of 30 minutes. More on this <a class="reference internal" href="#preempt-partition"><span class="std std-ref">here</span></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">xxl</span></code>    : Special partition for grand challenge applications. Requires approval from management.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visual</span></code> : We also have a few nodes which give you the liberty of running applications with GUI.</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="partitions-summary">
<span id="id1"></span><h2>Partitions Summary<a class="headerlink" href="#partitions-summary" title="Permalink to this heading">¶</a></h2>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"></th>
<th class="head"><p>Partition</p></th>
<th class="head"><p>Job Type</p></th>
<th class="head"><p>(min,max)CPUs</p></th>
<th class="head"><p>Max Time</p></th>
<th class="head"><p>Max Jobs</p></th>
<th class="head"><p>Example</p></th>
<th class="head"><p>Remarks</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">compute</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Small</p></td>
<td><p>(1,64)</p></td>
<td><p>7 days</p></td>
<td><p>200</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p compute</span>
<span class="c1">#SBATCH -n 25</span>
</pre></div>
</div>
</td>
<td><p>The small jobs will be forwarded, preferably to Dalma nodes.</p></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>Medium</p></td>
<td><p>(28,512)</p></td>
<td><p>7 days</p></td>
<td><p>20</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p compute</span>
<span class="c1">#SBATCH -n 56</span>
</pre></div>
</div>
</td>
<td></td>
</tr>
<tr class="row-odd"><td></td>
<td></td>
<td><p>Large</p></td>
<td><p>(256,2048)</p></td>
<td><p>2 days</p></td>
<td><p>10</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p compute</span>
<span class="c1">#SBATCH -n 1024</span>
</pre></div>
</div>
</td>
<td></td>
</tr>
<tr class="row-even"><td></td>
<td></td>
<td><p>XLarge</p></td>
<td><p>(512,4096)</p></td>
<td><p>2 days</p></td>
<td><p>5</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p compute</span>
<span class="c1">#SBATCH -n 4000</span>
</pre></div>
</div>
</td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nvidia</span></code></p></td>
<td><p>GPU</p></td>
<td><p>(1,80)</p></td>
<td><p>4 days</p></td>
<td><p>4</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p nvidia</span>
<span class="c1">#SBATCH --gres=gpu:1</span>
</pre></div>
</div>
</td>
<td><p>Max GPUs:4</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">bigmem</span></code></p></td>
<td><p>Large Memory Jobs</p></td>
<td><p>(1,40)</p></td>
<td><p>4 days</p></td>
<td><p>2</p></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p bigmem</span>
<span class="c1">#SBATCH --mem=700G</span>
</pre></div>
</div>
</td>
<td><p>Jobs requesting more than 480GB will be fowarded to bigmem</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">preempt</span></code></p></td>
<td><p>high priority</p></td>
<td><p>No Limit</p></td>
<td><p>7 days</p></td>
<td></td>
<td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p preempt</span>
<span class="c1">#SBATCH -n 128</span>
<span class="c1">#SBATCH -t 10:00:00</span>
</pre></div>
</div>
</td>
<td><p>grace period of 30 mins</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="sample-job-script">
<h2>Sample Job Script<a class="headerlink" href="#sample-job-script" title="Permalink to this heading">¶</a></h2>
<dl class="simple">
<dt>A job script, which consists of 2 parts:</dt><dd><ol class="loweralpha simple">
<li><p>Resources requirement.</p></li>
<li><p>Commands to be executed.</p></li>
</ol>
</dd>
</dl>
<p><strong>Points to be noted</strong></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Ask only what you need</strong></p></li>
<li><p>Serial jobs would need only one CPU (<code class="docutils literal notranslate"><span class="pre">#SBATCH</span> <span class="pre">-n</span> <span class="pre">1</span></code>)</p></li>
<li><p>Make sure the walltime specified is not greater than the allowed time limit. More details can be found <a class="reference internal" href="#partitions-summary"><span class="std std-ref">here</span></a>.</p></li>
<li><p>By Default 3.75GB of memory is assigned for each CPU allocated and hence defining the memory requirement is optional</p></li>
</ul>
</div></blockquote>
<div class="admonition-difference-between-cpus-cores-and-tasks admonition">
<p class="admonition-title">Difference between CPUs,Cores and Tasks</p>
<ul class="simple">
<li><p>On Jubail HPC, One CPU is equivalent to one Core. Jubail also has 128 CPUs per node.</p></li>
<li><p>In Slurm, the resources (CPUs) are allocated in terms of tasks which are denoted by <code class="docutils literal notranslate"><span class="pre">-n</span></code> or <code class="docutils literal notranslate"><span class="pre">--ntasks</span></code>.</p></li>
<li><p>By Default, the value of <code class="docutils literal notranslate"><span class="pre">-n</span></code> or <code class="docutils literal notranslate"><span class="pre">--ntasks</span></code> is one if left undefined.</p></li>
<li><p>By Default, Each task is equivalent to one CPU.</p></li>
<li><p>But if you have defined <code class="docutils literal notranslate"><span class="pre">-c</span></code> or <code class="docutils literal notranslate"><span class="pre">--cpus-per-task</span></code> in your job script, then the total number of CPUs allocated to you would be the multiple of <code class="docutils literal notranslate"><span class="pre">-n</span></code> and <code class="docutils literal notranslate"><span class="pre">-c</span></code>.</p></li>
</ul>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#Define the resource requirements here using #SBATCH</span>

<span class="c1">#For requesting 10 CPUs</span>
<span class="c1">#SBATCH -n 10</span>

<span class="c1">#Max wallTime for the job</span>
<span class="c1">#SBATCH -t 24:00:00</span>

<span class="c1">#Resource requiremenmt commands end here</span>

<span class="c1">#Add the lines for running your code/application</span>
module purge
module load abc

<span class="c1">#activate any environments if required</span>
conda activate myenv

<span class="c1">#Execute the code</span>
python abc.py
</pre></div>
</div>
</div>
<div class="section" id="basic-slurm-commands">
<h2>Basic SLURM Commands<a class="headerlink" href="#basic-slurm-commands" title="Permalink to this heading">¶</a></h2>
<p>SLURM is the Resource Manager we use to schedule the jobs to the resources according to the requirements specified. Bellow are
a few of the basic commands a user can use for his/her jobs:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><strong>Command</strong></p></th>
<th class="head"><p><strong>Descirption</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sbatch file1
</pre></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">sbatch</span></code> command is used to submit a job to the queue. Here <code class="docutils literal notranslate"><span class="pre">file1</span></code> is the job script
containing the details of resource requirements and commands to be executed.</p></td>
</tr>
<tr class="row-odd"><td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>squeue
</pre></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">squeue</span></code> command shows all your jobs (Runing and Pending) present in the queue</p></td>
</tr>
<tr class="row-even"><td><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>scancel <span class="m">127445</span>
scancel -u wz22
</pre></div>
</div>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">scancel</span></code> commands allows you to cancel your jobs in the queue. You can cancel a single job using the job id
or you can cancel all the jobs using your NetId.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="requesting-a-gpu-node">
<h2>Requesting a GPU node<a class="headerlink" href="#requesting-a-gpu-node" title="Permalink to this heading">¶</a></h2>
<p>To request a Gpu node you have two options:</p>
<ul class="simple">
<li><p>Requesting only one GPU card of any type</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p nvidia</span>
<span class="c1">#SBATCH --gres=gpu:1</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Requesting only one GPU card of a specific type( available types are v100 and a100)</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#SBATCH -p nvidia</span>
<span class="c1">#SBATCH --gres=gpu:a100:1</span>
</pre></div>
</div>
<p>For more details regarding GPU nodes and cards types, kindly check this section <a class="reference internal" href="../system/gpu_nodes.html"><span class="doc">Gpu nodes</span></a>.</p>
</div>
<div class="section" id="preempt-partition">
<span id="id2"></span><h2>Preempt Partition<a class="headerlink" href="#preempt-partition" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>Limitless high priority queue</strong> with the caveat that the jobs can be preempted (killed) to make space for other jobs demanding resources.</p></li>
<li><p>A grace period of 30 mins is given to the job to allow some time for a smooth termination or checkpointing, if needed.</p></li>
<li><p>We intend to increase the machine occupancy and reduce the waiting time in queues for those jobs that may have short runtime or are meant to be for testing ,otherwise jobs will be treated as regular jobs.</p></li>
<li><p>Default Walltime: 2 hours</p></li>
<li><p>Maximum Walltime: 7 days</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="job_jubail.html" class="btn btn-neutral float-right" title="Difference in Job Submission between Jubail and Dalma" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="Jobs Management" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, Center for Research Computing | NYU Abu Dhabi.

    </p>
  </div> 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>